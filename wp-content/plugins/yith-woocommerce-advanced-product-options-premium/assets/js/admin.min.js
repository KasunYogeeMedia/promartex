!function(r){function e(e,t){return t.children().each(function(){r(this).width(r(this).width())}),t}(initAdmin=function(){var e={dom:{colorpickerShow:".option-colorpicker-show"},conditions:{defaultColorpicker:".default-colorpicker",colorpickerPlaceholder:".colorpicker-placeholder"},init:function(){var t=e;r(document).on("change",t.dom.colorpickerShow,function(e){t.handle(r(e.target).closest(".fields").find(t.conditions.defaultColorpicker),"default_color"===r(e.target).val()),t.handle(r(e.target).closest(".fields").find(t.conditions.colorpickerPlaceholder),"placeholder"===r(e.target).val())})},handle:function(e,t){e=r(e);t?e.show():e.hide()}};checkAdminTabs=function(){let e=r(this),t=r("#addon-tabs a"),i=e.attr("id"),n=r("#addon-container > div");t.removeClass("selected"),e.addClass("selected"),n.hide(),r("#addon-container #tab-"+i).show()},avoidBrowserSave=function(){window.onbeforeunload=null},blockRulesShowTo=function(){let e=r(this),t=e.val(),i=r(".yith-wapo-block-rule-show-to-user-roles"),n=r(".yith-wapo-block-rule-show-to-membership");"user_roles"===t?(i.fadeIn(),n.hide()):"membership"===t?(i.hide(),n.fadeIn()):(i.fadeOut(),n.fadeOut())},initMinMaxRules=function(){let e=r("#min-max-rules .field.rule:first-child");var t=e.find("select").val(),i=r("#min-max-rules div.rule.min-max-rule:not(:first)");let n=r("div.enabled-by-addon-enable-min-max #add-min-max-rule");("min"!==t&&"max"!==t||i.length)&&n.hide()},deleteMinMaxrule=function(){let e=r(this),t=r("#min-max-rules div.rule.min-max-rule:first-child select");e.parent().remove(),t.change()},firstMixMaxRule=function(){let e=r(this),t=e.val(),i=e.parents("div.enabled-by-addon-enable-min-max").find("#add-min-max-rule"),n=r("#min-max-rules div.rule.min-max-rule:not(:first)");n.remove(),i.show(),"exa"===t&&i.hide()},addNewMinMaxRule=function(){let e=r(this),t=r("#min-max-rules"),i=r("#min-max-rules .field.rule:first-child"),n=i.find("select").val(),o=e.parents("div.enabled-by-addon-enable-min-max").find("#add-min-max-rule"),a=i.clone(),d=a.find("select"),l=d.find("option");return a.find("span.select2.select2-container").remove(),d.select2({minimumResultsForSearch:-1}),a.find("input[type=number]").val(""),"min"!==n&&"max"!==n||l.each(function(){var e=r(this).val();let t=!1;n===e&&(t=!0),(t="exa"===e?!0:t)&&r(this).remove()}),t.append(a),o.hide(),!1},addConditionalLogic=function(){let e=r("#conditional-rules .field.rule:first-child"),t=e.clone(!1);t.find("input[type=number]").val(""),t.insertBefore("#add-conditional-rule"),t.find(".select2").remove(),t.find(".addon-conditional-rule-addon").select2({width:"200px"}),t.find(".addon-conditional-rule-addon-is").select2({width:"150px"})},removeConditionalLogic=function(){let e=r(this);e.parent().remove()},closeAddonPopup=function(e){e.target===this&&closeAddonPopupAction()},closeAddonPopupAction=function(){let e=r("#yith-wapo-addon-overlay"),t=window.location.href;e.fadeOut(),t=t.split("&addon_id"),window.history.pushState("","",t[0])},r(document).on("click","#yith-wapo-addon-overlay #addon-tabs a",checkAdminTabs),r(document).on("click",".yith-wapo a, .yith-wapo button, .yith-wapo input",avoidBrowserSave),r(document).on("click","#add-min-max-rule a",addNewMinMaxRule),r(document).on("click","#min-max-rules .delete-min-max-rule",deleteMinMaxrule),r(document).on("change","#min-max-rules div.rule.min-max-rule:first-child select",firstMixMaxRule),initMinMaxRules(),r(document).on("change","#yith-wapo-block-rule-show-to",blockRulesShowTo),r(document).on("click","#add-conditional-rule a",addConditionalLogic),r(document).on("click","#conditional-rules .delete-rule",removeConditionalLogic),r(document).on("click","#yith-wapo-addon-overlay",closeAddonPopup),r(document).on("click","#yith-wapo-addon-overlay #close-popup, #yith-wapo-addon-overlay button.cancel",closeAddonPopupAction),e.init()})(),r("#option-price-type").on("change",function(){let e=r(this),t=e.parents(".option-cost"),i=t.find("div.option-price-sale");"multiplied"===e.val()?i.fadeOut():i.fadeIn()}),r("#sortable-blocks").on("change",".active .yith-plugin-fw-onoff-container input",function(){var e=r(this).attr("id").replace("yith-wapo-active-block-",""),t=0,t=r(this).is(":checked")?1:0;r.post(ajaxurl,{action:"enable_disable_block",block_id:e,block_vis:t},function(e){console.log("[YITH.LOG] - Block visibility updated")})}),r("#sortable-addons").on("change",".addon-onoff input",function(){var e=r(this).attr("id").replace("yith-wapo-active-addon-",""),t=0,t=r(this).is(":checked")?1:0;r.post(ajaxurl,{action:"enable_disable_addon",addon_id:e,addon_vis:t},function(e){console.log("[YITH.LOG] - Addon visibility updated")})}),r("#sortable-blocks").sortable({containment:"parent",helper:e,revert:!0,axis:"y",update:function(e,t){var i=t.item.data("id"),n=parseFloat(t.item.prev().data("priority")),t=parseFloat(t.item.next().data("priority"));r.post(ajaxurl,{action:"sortable_blocks",moved_item:i,prev_item:n,next_item:t},function(e){var e=e.split("-"),t=e[0],e=parseFloat(e[1]);r("#sortable-blocks #block-"+t).attr("data-priority",e)})}}),r("#sortable-addons").sortable({containment:"#block-addons-container",revert:!0,axis:"y",update:function(e,t){var i=t.item.data("id"),n=parseFloat(t.item.prev().data("priority")),t=parseFloat(t.item.next().data("priority"));r.post(ajaxurl,{action:"sortable_addons",moved_item:i,prev_item:n,next_item:t},function(e){var e=e.split("-"),t=e[0],e=parseFloat(e[1]);r("#sortable-addons #addon-"+t).attr("data-priority",e)})}}),r("#addon_options").sortable({helper:e,revert:!0,axis:"y",delay:150,update:function(e,t){r("#addon_options .option").each(function(e,t){let i=r(t).find(".selected-by-default input.selected-by-default-chbx");i.attr("name","options[default]["+e+"]")})}}),r("ul, li, tbody, tr, td").disableSelection();var t=r("#block-rules #yith-wapo-block-rule-show-in"),i=r(".field-wrap.yith-wapo-block-rule-show-in-products"),n=r(".field-wrap.yith-wapo-block-rule-show-in-categories"),o=t.val(),a=r("#block-rules #yith-wapo-block-rule-exclude-products"),d=r(".field-wrap.yith-wapo-block-rule-exclude-products-products"),l=r(".field-wrap.yith-wapo-block-rule-exclude-products-categories");function c(e){e.is(":checked")?r(".enabled-by-"+e.attr("id")).fadeIn():r(".enabled-by-"+e.attr("id")).fadeOut()}t.change(function(){"products"===(o=r(this).val())?(i.fadeIn(),n.hide()):(i.fadeOut(),n.fadeOut())}),a.change(function(){"yes"==r(this).val()?(d.fadeIn(),"all"==o&&l.fadeIn()):(d.fadeOut(),l.fadeOut())}),r(".yith-wapo").on("change",".enabler input",function(){c(r(this))}),r(".yith-wapo .enabler input").each(function(){c(r(this))}),r(".yith-wapo").on("change","#option-separator-style",function(){"empty_space"==r(this).val()?r(".field-wrap.option-separator-color").fadeOut():r(".field-wrap.option-separator-color").fadeIn()}),r(".yith-wapo").on("change","#addon-custom-style",function(){!r(this).is(":checked")&&r("#addon-image-equal-height").is(":checked")&&r(".addon-image-equal-height .yith-plugin-fw-onoff").click()}),r("#tab-options-list").on("click",".option .title",function(e){let t=jQuery(e.target);t.hasClass("selected-by-default-chbx")||((e=r(this).parent().find(".fields")).toggle(),e.is(":visible")?r(this).parent().removeClass("close").addClass("open"):r(this).parent().removeClass("open").addClass("close"))}),r("#add-new-option").click(function(){var e=r(this).parent().find(".option").length,e=(r(".yith-plugin-fw-upload-container button").off(),wp.template("new-option-"+e));r("#add-new-option").before(e()),r("body").trigger("yith_fields_init")}),r("#tab-options-list").on("change",".option-price-method",function(){var e=r(this).parent().parent().parent().parent();"free"!=r(this).val()&&"product"!=r(this).val()&&"value_x_product"!=r(this).val()?(e.find(".option-cost").fadeIn(),"increase"==r(this).val()?(e.find(".option-cost .option-price-method-increase").fadeIn(),e.find(".option-cost .option-price-method-decrease").fadeOut()):(e.find(".option-cost .option-price-method-increase").fadeOut(),e.find(".option-cost .option-price-method-decrease").fadeIn())):e.find(".option-cost").fadeOut()}),r("#tab-options-list").on("change",".option-selectable-dates",function(){var e=r(this).parent().parent().parent().parent();"days"==r(this).val()?(e.find(".option-selectable-days-ranges").fadeIn(),e.find(".option-selectable-date-ranges").hide()):"date"==r(this).val()?(e.find(".option-selectable-days-ranges").hide(),e.find(".option-selectable-date-ranges").fadeIn()):(e.find(".option-selectable-days-ranges").hide(),e.find(".option-selectable-date-ranges").hide())}),r(document).on("click","#addon-container .yith-plugin-fw__action-button--delete-action",function(){return r(this).parents(".option").remove(),!1}),r("#tab-options-list").on("change",".color-show-as select",function(){var e=r(this).parent().parent().parent().parent().parent();"double"==r(this).val()?(e.find(".color").fadeIn(),e.find(".color_b").fadeIn(),e.find(".color_image").hide()):"image"==r(this).val()?(e.find(".color").hide(),e.find(".color_b").hide(),e.find(".color_image").fadeIn()):(e.find(".color").fadeIn(),e.find(".color_b").hide(),e.find(".color_image").hide())}),r("#tab-options-list").on("click",".option .title",function(){r(this).parent().find(".color-show-as select").change()}),r("#tab-options-list").find(".color-show-as select").change(),r(".yith-wapo").on("change",".option-date-default",function(){var e=r(this).parent().parent().parent().parent();"specific"==r(this).val()?(e.find(".option-date-default-day").fadeIn(),e.find(".option-date-default-interval").hide()):"interval"==r(this).val()?(e.find(".option-date-default-day").hide(),e.find(".option-date-default-interval").fadeIn()):(e.find(".option-date-default-day").fadeOut(),e.find(".option-date-default-interval").fadeOut())}),r(document).on("click",".add-date-rule a",function(){let e=r(this).parents(".option").data("index"),t=r(this).parents(".date-rules").find(".date-rules-container .rule").length,i=wp.template("yith-wapo-date-rule-template"),n=r(this).parents(".date-rules").find(".date-rules-container .rule").last();return n.after(i({addon_id:e,option_id:t})),r(document).trigger("yith_fields_init"),!1}),r(".date-rules").on("change",".select_what",function(){var e=r(this).parent().parent().parent();e.find(".field:not(.what)").hide(),("years"==r(this).val()?e.find(".field.years"):"months"==r(this).val()?e.find(".field.months"):"daysweek"==r(this).val()?e.find(".field.daysweek"):e.find(".field.days")).fadeIn()}),r(".date-rules").on("click",".delete-rule",function(){r(this).parent().remove()}),r(document).on("click",".add-time-slot a",function(){let e=r(this).parent(),t=r(this).parent().parent(),i=t.find(".slot:first-child"),n=i.clone();Math.floor(1e5*Math.random());return n.find(".delete-slot").show(),e.before(n),!1}),r(".time-slots").on("click",".delete-slot",function(){r(this).parent().remove()}),r(document).on("select2:open",function(e){r(".select2-results").closest(".select2-container").addClass("yith-addons-select2-container")})}(jQuery);